# Simple Web VM 사용 매뉴얼

## 개요
Simple Web VM은 브라우저만으로 실행할 수 있는 학습용 가상 머신입니다. HTML/CSS/JavaScript로 동작하며, 간단한 어셈블리 스타일 명령어를 입력하고 한 단계씩 실행하거나 전체를 실행해 결과를 확인할 수 있습니다.

## 파일 구성
- `index.html` : 사용자 인터페이스와 문서 구조를 정의합니다.
- `styles.css` : 화면 배치와 테마를 포함한 스타일 시트를 제공합니다.
- `vm.js` : 가상 머신 코어 로직, 명령어 파서, UI 연동 스크립트를 포함합니다.

## 준비 사항
- 최신 버전의 Chrome, Edge, Firefox 등 현대적인 웹 브라우저 1개
- 로컬 파일을 열 수 있는 환경 (별도 서버 필요 없음)

## 실행 방법
1. `Simple_Web_VM/index.html` 파일을 더블 클릭하거나 브라우저의 "파일 열기" 기능으로 불러옵니다.
2. 페이지가 열리면 상단에 "Simple Web VM" 제목과 함께 프로그램/입력/출력 영역, 실행 버튼, 레지스터 및 메모리 표가 표시됩니다.
3. 초기 상태에서는 샘플 프로그램이 자동으로 채워져 있으며, 입력과 출력은 비어 있습니다.

## UI 구성 요소
- **Program** : 실행할 명령어를 작성하는 텍스트 영역입니다. 주석은 `;` 또는 `#` 뒤에 작성할 수 있습니다.
- **Input** : `READ` 명령이 소비할 문자를 적어 둡니다. 실행 시 앞에서부터 한 글자씩 읽습니다.
- **Output** : `WRITE` 명령이 출력한 문자가 누적됩니다. 읽기 전용입니다.
- **Load Program** : 텍스트 영역의 프로그램을 파싱하여 메모리와 레지스터를 초기화합니다.
- **Step** : 현재 `PC`(Program Counter)가 가리키는 명령 한 줄만 실행합니다.
- **Run** : `HALT` 또는 사이클 제한에 도달할 때까지 연속 실행합니다.
- **Reset** : 메모리와 레지스터를 초기화하고 출력 버퍼를 비웁니다.
- **Status 영역** : 마지막 동작 결과나 오류 메시지를 보여 줍니다.
- **Registers 표** : `r0`~`r3` 레지스터 값, `PC`, 상태 플래그(Z, N), 현재 상태(HALTED/READY)를 표시합니다.
- **Memory 표** : 128바이트 메모리를 8열 단위로 확인할 수 있습니다.

## 기본 실행 흐름
1. **프로그램 작성 또는 수정** : 샘플 코드 대신 직접 명령어를 입력합니다.
2. **입력 데이터 준비** : 필요하다면 Input 영역에 테스트 데이터를 작성합니다.
3. **Load Program 클릭** : 구문 오류가 있다면 상태 영역에 오류가 표시됩니다.
4. **Step 실행(선택)** : 명령을 한 줄씩 확인하며 결과를 관찰합니다.
5. **Run 실행** : 전체를 실행하고 Output과 Registers, Memory 변화를 확인합니다.
6. **Reset** : 다른 실험을 위해 상태를 초기화합니다.

## 명령어 작성 규칙
- 라벨 표기 : `start:`처럼 줄 앞에 `이름:` 형태로 작성하며, 영문자/숫자/밑줄만 사용합니다.
- 명령 형식 : `LABEL: OPCODE ARG1, ARG2` 또는 `OPCODE ARG1, ARG2` 형태입니다.
- 레지스터 : `r0`~`r3`만 존재합니다.
- 메모리 참조 : `@10`처럼 숫자 주소 앞에 `@`를 붙여 사용합니다.
- 즉값 : 정수(10, -1), 16진수(0xFF), 2진수(0b1010), 문자 리터럴('A', '\n')을 지원합니다.
- 지원 opcode 목록 : `LOAD`, `STORE`, `ADD`, `SUB`, `INC`, `DEC`, `CMP`, `JMP`, `JZ`, `JNZ`, `READ`, `WRITE`, `HALT`.

## 입력/출력 처리
- `READ rX` : Input 영역에서 다음 문자를 코드 포인트 값으로 읽어 `rX`에 저장합니다. 입력이 소진되면 0을 읽고 Z 플래그가 1로 설정됩니다.
- `WRITE rX` : `rX` 하위 16비트를 문자로 변환해 Output 영역에 추가합니다.

## 상태 점검 및 디버깅 팁
- Step 버튼을 활용하면 각 명령 실행 후 레지스터와 메모리 변화를 즉시 확인할 수 있습니다.
- 오류 발생 시 상태 영역에 정확한 줄 번호와 함께 설명이 표시되므로, 해당 줄을 수정한 뒤 다시 `Load Program`을 실행합니다.
- 무한 루프를 방지하기 위해 4096 사이클 제한이 있으며, 초과 시 자동으로 정지하고 오류 메시지를 띄웁니다.

## 자주 묻는 질문
- **Q. 브라우저에서 아무 것도 표시되지 않아요.**
  - A. 브라우저 콘솔(F12)을 열어 JavaScript 오류가 있는지 확인하고, 최신 브라우저인지 점검하세요.
- **Q. 한글 문자를 출력하고 싶어요.**
  - A. `LOAD r0, '가'`처럼 유니코드 문자를 직접 사용할 수 있지만, 출력은 브라우저 글꼴 지원에 따라 달라집니다.
- **Q. 입력이 계속 0으로 들어와요.**
  - A. Input 영역에 문자를 입력했는지 확인하고, `Load Program`을 눌러 입력 버퍼를 다시 로드하세요.

## 추가 실험 아이디어
- 간단한 덧셈/뺄셈 계산기 작성
- `READ`/`WRITE`를 활용한 에코 프로그램 구현
- 메모리를 사용해 문자열을 저장하고 순차적으로 출력하기

필요한 기능이 있다면 vm.js를 수정해 명령어를 확장하거나 UI를 개선할 수 있습니다.
